<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Evan Peng"><link rel="alternative" href="/atom.xml" title="我的學習筆記" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>git rebase merge - 我的學習筆記</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">我的學習筆記</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">文章</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2017-05-30T08:31:02.000Z">May 30, 2017</time><h1 class="post__title"><a href="/2017/05/30/git-rebase-merge/">git rebase merge</a></h1><div class="post__main echo"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>自己使用Git也一年了，但是因為平常開發會用到的指令可能就是基本的<strong>git commit</strong>、<strong>git status</strong>、<strong>git log</strong>…等等，再配合<strong>Source Tree</strong>，雖然有聽過其他同事使用進階的指令，但卻一直沒去認識它XD，所以趁這幾天連假時間來摸索一下，這裡引用<strong>Ｗill 保哥</strong>的<a href="https://github.com/doggy8088/Learn-Git-in-30-days" target="_blank" rel="external">30 天精通 Git 版本控管</a>，也更加認識到Git的強大。</p>
<h2 id="範例-選擇一次貼上全部指令執行時，可能會因為命令延遲，造成最後的結果有誤"><a href="#範例-選擇一次貼上全部指令執行時，可能會因為命令延遲，造成最後的結果有誤" class="headerlink" title="範例 (選擇一次貼上全部指令執行時，可能會因為命令延遲，造成最後的結果有誤)"></a>範例 (選擇一次貼上全部指令執行時，可能會因為命令延遲，造成最後的結果有誤)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">mkdir git-rebase-demo</div><div class="line"></div><div class="line"><span class="built_in">cd</span> git-rebase-demo</div><div class="line">git init</div><div class="line"></div><div class="line"><span class="built_in">echo</span> 1 &gt; a.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Initial commit (a.txt created)"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> 2 &gt; a.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Update a.txt to 2"</span></div><div class="line"></div><div class="line">:: 建立並切換到 branch1 分支</div><div class="line">git checkout -b branch1</div><div class="line"></div><div class="line"><span class="built_in">echo</span> b &gt; b.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Add b.txt"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> c &gt; c.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Add c.txt"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> 333 &gt; c.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Update c.txt to 333"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> d &gt; d.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Add d.txt"</span></div><div class="line"></div><div class="line">:: 切換到 master 分支</div><div class="line">git checkout master</div><div class="line"></div><div class="line"><span class="built_in">echo</span> 3 &gt; a.txt</div><div class="line">git add .</div><div class="line">git commit -m <span class="string">"Update a.txt to 3"</span></div></pre></td></tr></table></figure>
<h2 id="Rebase-是什麼？"><a href="#Rebase-是什麼？" class="headerlink" title="Rebase 是什麼？"></a>Rebase 是什麼？</h2><p>Rebase 是 “Re-“ 與 “Base” 的複合字，這裡的 “Base” 代表「基礎版本」的意思，表示你想要重新修改特定分支的「基礎版本」，把另外一個分支的變更，當成我這個分支的基礎。</p>
<h2 id="使用-git-rebase-命令"><a href="#使用-git-rebase-命令" class="headerlink" title="使用 git rebase 命令"></a>使用 <strong>git rebase</strong> 命令</h2><p>###範例</p>
<p>1.切換至 branch1 分支： git checkout branch1<br>2.然後執行 Rebase 動作，把 master 當成我們的基礎版本： git rebase master<br><img src="/2017/05/30/git-rebase-merge/cmd-01.png" alt="git rebase master" title="git rebase master"><br>請注意執行完 git rebase master 之後的顯示訊息，他說先將我們 branch1 分支的最新版本(head)倒帶(rewind)到跟 master 一樣的分支起點(rewinding head)，然後再重新套用(replay)指定的 master 分支中所有版本。英文的 on top of it 代表的是讓 branch1 分支原本的變更套用在 master 上面，所謂的「上面」代表的是先套用 master 的版本，然後才套用 branch1 的版本 (請見上圖的 Applying: 那幾行)。</p>
<p>透過SourceTree來對照<strong>git rebase master</strong>前後的版本線圖(commit graph)<br><img src="/2017/05/30/git-rebase-merge/source-tree-01.png" alt="Before git rebase master" title="Before git rebase master"></p>
<p><center><strong>執行git rebase之前</strong></center><br><img src="/2017/05/30/git-rebase-merge/source-tree-02.png" alt="After git rebase master" title="After git rebase master"></p>
<p><center><strong>執行git rebase之後</strong></center><br>上面這張圖所代表的意思，就如同以下指令的執行順序：</p>
<p>1.建立 Initial commit (a.txt created)，同時預設建立 master 分支<br>2.建立 Update a.txt to 2<br>3.建立 Update a.txt to 3<br>4.建立並切換至 branch1 分支<br>5.然後不斷 commit 到 Add d.txt 這個版本</p>
<p>所以，這其實還是「兩個分支」喔，並沒有被合併成一個！千萬別認為這張圖只有一條線，所以只有一個分支。</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/Git/">Git</a></li></ul></footer></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2017 Evan Peng</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>